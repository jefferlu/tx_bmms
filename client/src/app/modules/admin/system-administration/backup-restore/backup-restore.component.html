<div class="absolute inset-0 flex min-w-0 flex-col overflow-hidden h-full">

    <div class="flex flex-auto flex-col h-full bg-white dark:bg-gray-900" *transloco="let t">
        <!-- Header -->
        <div class="flex flex-row items-center px-6 py-6 md:px-8">
            <div class="ml-4 flex min-w-0 flex-col">
                <!-- Title -->
                <div class="text-3xl font-extrabold leading-none tracking-tight">
                    {{t('backup-restore')}}
                </div>
                <div class="text-secondary truncate leading-8">
                    {{t('backup-restore-desc')}}
                </div>
            </div>
        </div>

        <!-- Main -->
        <div class="flex flex-auto p-6">
            <div class="mx-auto flex w-full max-w-xs flex-auto flex-col sm:max-w-2xl">

                <div class="mt-8 grid grid-cols-1 gap-8 sm:mt-10 sm:grid-cols-2 lg:grid-cols-2">

                    <div class="sm:col-span-2">
                        <gts-alert [appearance]="'outline'" [type]="'info'">
                            {{t('backup-restore-warn')}}
                        </gts-alert>
                    </div>

                    <mat-radio-group class="pointer-events-none invisible absolute h-0 w-0" [(ngModel)]="plan" #planRadioGroup="matRadioGroup">
                        <mat-radio-button [value]="'backup'"></mat-radio-button>
                        <mat-radio-button [value]="'restore'"></mat-radio-button>
                    </mat-radio-group>
                    <!-- <div class="bg-card flex h-50 flex-col overflow-hidden rounded-2xl shadow"> -->
                    <div class="bg-card relative flex cursor-pointer flex-col items-center justify-center rounded-2xl min-h-50 p-6"
                        [ngClass]="{'ring ring-inset ring-primary-400':planRadioGroup.value === 'backup'}" (click)="planRadioGroup.value = plan = 'backup'">
                        <div class="flex flex-col p-6 text-center">
                            @if (planRadioGroup.value === 'backup') {
                            <mat-icon class="absolute right-0 top-0 mr-3 mt-3 text-primary-400 icon-size-7"
                                [svgIcon]="'heroicons_solid:check-circle'"></mat-icon>
                            }
                            <div class="text-lg font-medium">
                                {{t('backup-database')}}
                            </div>
                            <div class="text-secondary mt-0.5 line-clamp-2">
                                {{t('backup-database-desc')}}
                            </div>
                        </div>
                    </div>
                    <div class="bg-card relative flex cursor-pointer flex-col items-center justify-center rounded-2xl p-6"
                        [ngClass]="{'ring ring-inset ring-primary-400':planRadioGroup.value === 'restore',}" (click)="planRadioGroup.value = plan = 'restore'">
                        <div class="flex flex-col p-6 text-center">
                            @if (planRadioGroup.value === 'restore') {
                            <mat-icon class="absolute right-0 top-0 mr-3 mt-3 text-primary-400 icon-size-7"
                                [svgIcon]="'heroicons_solid:check-circle'"></mat-icon>
                            }
                            <div class="text-lg font-medium">
                                {{t('restore-database')}}
                            </div>

                            <div class="text-secondary mt-1 line-clamp-2">
                                {{data?.latest_backup}}
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Divider -->
                <div class="mb-10 mt-12 border-t"></div>

                <!-- Actions -->
                <div class="flex items-center justify-end pb-4">
                    <!-- <button mat-stroked-button type="button">取消作業</button> -->
                    <button mat-flat-button (click)="onClick()" [disabled]="!planRadioGroup.value">
                        <mat-icon class="icon-size-5" [svgIcon]="'heroicons_outline:arrow-path-rounded-square'"></mat-icon>
                        <span class="ml-2">{{t('start-execution')}}</span>
                    </button>
                </div>     
                
                <p-scrollpanel class="p-4 bg-card shadow rounded-md flex-grow">
                    <pre class="">{{message}}</pre>
                </p-scrollpanel>
            </div>
        </div>
        
    </div>
</div>