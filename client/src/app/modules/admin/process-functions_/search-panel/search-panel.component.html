<!-- 已選條件 -->
<div class="flex items-center mx-10 px-6 py-2 md:px-8 border-t border-b">
    <div class="flex-shrink-0 items-center justify-center mr-4 leading-8 font-semibold">已選條件 :</div>
    <div class='flex flex-wrap gap-2'>
        @for(criterion of criteria;track criterion){

        @for(item of criterion.bim_categories;track item){
        @if(item.selected){
        <span class='flex items-center py-1 px-2 rounded cursor-pointer text-center border bg-gray-600 border-gray-400' (click)="onSelected(item)">{{item.value}}
            <mat-icon class="icon-size-5 ml-1" [svgIcon]="'heroicons_mini:x-mark'"></mat-icon>
        </span>
        }}}
    </div>
</div>

<!-- 關鍵字查詢 -->
<div class="flex items-center mx-10 px-6 py-2 md:px-8 border-b">
    <div class="flex-shrink-0 items-center justify-center mr-9 leading-8 font-semibold">關鍵字 :</div>
    <div class='flex flex-wrap gap-2'>
        <div class="">
            <input type="text" class="px-2 py-1.5 border rounded min-w-64 focus:border-white bg-gray-700 border-gray-600 placeholder:text-gray-400 text-white"
                placeholder="請輸入關鍵字..." (input)="onInputChange($event)" />
        </div>
    </div>
</div>


<!-- 動態條件 -->
@for(criterion of criteria;track criterion){
<div class="flex items-center mx-10 px-6 py-2 md:px-8 cursor-pointer border-b">
    <div class="flex-shrink-0 self-start items-center justify-center mr-4 leading-8 font-semibold">{{criterion.name}} :</div>

    <div class="flex flex-wrap gap-2 transition-all duration-300"
        [ngClass]="{'max-h-10 overflow-hidden': !criterion.collapse, 'max-h-[1000px] overflow-visible': criterion.collapse}">
        @for (item of criterion.bim_categories; track item) {
            <span class="py-1 px-2 rounded cursor-pointer text-center border hover:border-gray-400"
                [ngClass]="{'border-gray-50': item.selected, 'border-transparent': !item.selected}"
                (click)="onSelected(item)">
                {{ item.value }}
            </span>
        }
    </div>
    <div class="flex-none self-start ml-auto">
        <button class='py-1 px-2 rounded cursor-pointer text-center border border-gray-400 primary' (click)="onCollapse(criterion)">
            {{ criterion.collapse ? '▲' : '▼' }}
        </button>
    </div>
</div>
}