<div class="flex-auto bg-card rounded-lg">
    <div class="ml-10 mr-6 mt-2 pt-6 flex flex-auto flex-col result-table initial-height">
        <p-table [value]="objects" [tableStyle]="{ 'table-layout': 'fixed','min-width': '50rem' }" [scrollable]="true" scrollHeight="100%">

            <ng-template pTemplate="header">
                <tr>
                    <th class="w-15 text-center">序號</th>
                    <th class="min-w-60">檔案名稱</th>
                    <th class="min-w-60">處理進度</th>
                    <th class="w-30 text-center">擷取數據</th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-object let-no="rowIndex">
                <tr>
                    <td class="text-center">{{no+1}}</td>
                    <td>{{object.objectKey}}</td>
                    <td>
                        @if(object.status==='success'||object.status==='complete'){<i class="pi text-green-400 pi-check-circle"></i>}
                        @else{ {{ object.progress }} }                        
                    </td>
                    <td class="text-center ">
                        <button class="gts-alert-dismiss-button" mat-icon-button (click)="onExtraMetadata(object)"
                            [disabled]="object.status!=='success' && object.status!=='failed' && object.status!=='complete'">
                            <mat-icon [svgIcon]="'heroicons_outline:inbox-arrow-down'"></mat-icon>
                        </button>
                    </td>
                </tr>
            </ng-template>

        </p-table>
    </div>
</div>

<div class="flex-auto">
    <div class="flex flex-col sm:flex-row md:flex-col flex-auto justify-between py-8"></div>
    <div class="relative">
        <table class="default-item-table">
            <thead>
                <tr>
                    <th class="w-20">NO</th>
                    <th>Object Key</th>
                    <th class="w-160">Procress</th>
                    <th class="w-36">Action</th>
                </tr>
            </thead>

            <tbody *ngIf="objects">
                @for (object of objects; track trackByFn;let no=$index) {
                <tr>
                    <td class="text-center">{{no+1}}</td>
                    <td class="px-3">{{object.objectKey}}</td>
                    <td class="text-green-700">
                        <span *ngIf="object.status!='success'" [ngClass]="{'text-accent':object.status==='complete'}">
                            {{ object.progress }}
                        </span>
                    </td>
                    <td class="text-center">
                        @if(object.status==='complete'){
                        <div class="flex items-center justify-center h-10">
                            <mat-icon color="accent" [svgIcon]="'heroicons_outline:check-circle'"></mat-icon>
                        </div>
                        }
                        @else{
                        <button mat-button class="underline" color="primary" [disabled]="object.status==='extract'"
                            (click)="onExtraMetadata(object)">extract</button>
                        }

                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>