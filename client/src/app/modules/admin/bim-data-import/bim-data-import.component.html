<div class="absolute inset-0 flex min-w-0 flex-col overflow-hidden h-full" *transloco="let t">
    <div class="mx-auto flex w-full h-full max-w-screen-xl flex-wrap p-6">
        <div class="flex flex-auto flex-col h-full sm:col-span-2 lg:col-span-3">

            <!-- Header -->
            <div class="flex flex-row items-center justify-between py-6 ">
                <!-- Title -->
                <div class="text-3xl font-extrabold leading-none tracking-tight">
                    {{t('bim-data-import')}}
                </div>

                <!-- Actions -->
                <div>
                    <input #fileInput class="absolute h-0 w-0 opacity-0 invisible pointer-events-none" type="file" [multiple]="true"
                        (change)="onFileSelected($event)">
                    <a mat-stroked-button (click)="triggerFileInput()">
                        <span class="inline-flex items-center cursor-pointer">
                            <mat-icon class="mr-2 icon-size-5" [svgIcon]="'heroicons_outline:folder-open'"></mat-icon>
                            <span>選擇檔案</span>
                        </span>
                    </a>
                </div>
            </div>

            <!-- Content -->
            <div class="flex h-full overflow-y-auto bg-card rounded-xl">
                <!-- @if(files?.length>0){ -->
                <p-table class="w-full" [value]="files" [scrollable]="true" scrollHeight="flex" [styleClass]="'p-datatable-lg'">
                    <ng-template pTemplate="header">
                        <tr class="border-b-2">
                            <th class="w-100">檔案名稱</th>
                            <th class="w-40">檔案大小</th>
                            <th class="w-40">狀態</th>
                            <th>訊息</th>
                            <th class="w-20"></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-file>
                        <tr [pSelectableRow]="file" class="hover:bg-hover">
                            <td>{{file.name}}</td>
                            <td>{{file.size}}</td>
                            <td>
                                {{file.status}}
                                <!-- @if(file.status==='process'){<mat-progress-bar class="" [mode]="'determinate'" [value]="file.progress"></mat-progress-bar>}
                                @else if(file.status==='complete'){<i class="pi text-green-500 pi-check-circle"></i>}
                                @else{<span class="text-green-900 dark:text-green-300">{{file.status||'準備上傳'}}</span>} -->
                            </td>
                            <td>{{file.message}}</td>
                            <td class="flex items-center">
                                @if(file.status==='ready'){
                                <button class="gts-alert-dismiss-button" mat-icon-button (click)="onBimDataImport(file)">
                                    <mat-icon [svgIcon]="'heroicons_outline:cloud-arrow-up'"></mat-icon>
                                </button>
                                }
                                @else if(file.status==='completed'){
                                <mat-icon class="text-green-400 m-2" [svgIcon]="'heroicons_outline:check-circle'"></mat-icon>
                                }
                                @else {
                                <mat-progress-spinner class="m-3" color="accent" [diameter]="16" [mode]="'indeterminate'"></mat-progress-spinner>
                                }

                            </td>
                        </tr>
                    </ng-template>
                </p-table>
                <!-- }
                @else {
                <div class="flex flex-auto flex-col items-center justify-center text-secondary mb-10">
                    <mat-icon class="icon-size-24" [svgIcon]="'heroicons_outline:exclamation-circle'"></mat-icon>
                    <div class="mt-4 text-2xl font-semibold tracking-tight">
                        {{t('no-data-found')}}
                    </div>
                </div>
                } -->
            </div>

        </div>
    </div>
</div>